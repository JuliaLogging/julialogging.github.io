<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>How to log to a file · JuliaLogging</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/julialogging.css" rel="stylesheet" type="text/css"/><link href="../../assets/gruvbox-light-hard.css" rel="stylesheet" type="text/css"/><link href="../../assets/gruvbox-dark-hard.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="JuliaLogging logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">JuliaLogging</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../package-overview/">Logging package overview</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/logging-basics/">Logging basics</a></li><li><a class="tocitem" href="../../tutorials/working-with-loggers/">Working with loggers</a></li><li><a class="tocitem" href="../../tutorials/implement-a-new-logger/">Implement a new logger</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">How-to guides</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../enable-debug/">How to enable <code>@debug</code> messages</a></li><li class="is-active"><a class="tocitem" href>How to log to a file</a></li><li><a class="tocitem" href="../tee/">Send messages to multiple locations</a></li><li><a class="tocitem" href="../filter-messages/">How to filter messages</a></li><li><a class="tocitem" href="../rotate-log-files/">How to rotate log files</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Reference</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../reference/logcompose/">LogCompose.jl</a></li><li><a class="tocitem" href="../../reference/logging/">Logging.jl</a></li><li><a class="tocitem" href="../../reference/logging2/">Logging2.jl</a></li><li><a class="tocitem" href="../../reference/loggingextras/">LoggingExtras.jl</a></li><li><a class="tocitem" href="../../reference/loggingformats/">LoggingFormats.jl</a></li><li><a class="tocitem" href="../../reference/logroller/">LogRoller.jl</a></li><li><a class="tocitem" href="../../reference/lokilogger/">LokiLogger.jl</a></li><li><a class="tocitem" href="../../reference/progresslogging/">ProgressLogging.jl</a></li><li><a class="tocitem" href="../../reference/sysloglogging/">SyslogLogging.jl</a></li><li><a class="tocitem" href="../../reference/terminalloggers/">TerminalLoggers.jl</a></li><li><a class="tocitem" href="../../reference/miniloggers/">MiniLoggers.jl</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">How-to guides</a></li><li class="is-active"><a href>How to log to a file</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>How to log to a file</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaLogging/julialogging.github.io/blob/master/src/how-to/log-to-file.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="How-to-log-to-a-file"><a class="docs-heading-anchor" href="#How-to-log-to-a-file">How to log to a file</a><a id="How-to-log-to-a-file-1"></a><a class="docs-heading-anchor-permalink" href="#How-to-log-to-a-file" title="Permalink"></a></h1><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>It is a good idea to follow along by copy-pasting the code snippets into a Julia REPL!</p></div></div><p>Instead of logging to the terminal it is quite common to send log messages to a log file. Both the <a href="../../reference/logging/#Logging.ConsoleLogger"><code>ConsoleLogger</code></a> and the <a href="../../reference/logging/#Logging.SimpleLogger"><code>SimpleLogger</code></a> from the <code>Logging</code> standard library accept an IO stream as input, so it is pretty easy to plug an open filestream in those loggers and log to a file. Here is an example:</p><pre><code class="language-julia hljs"><span class="hljs-keyword">using</span> Logging

io <span class="hljs-keyword">=</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;logfile.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>)
logger <span class="hljs-keyword">=</span> <span class="hljs-built_in">ConsoleLogger</span>(io)

<span class="hljs-built_in">with_logger</span>(logger) <span class="hljs-keyword">do</span>
    <span class="hljs-meta">@info</span> <span class="hljs-string">&quot;Message to the logfile&quot;</span>
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">close</span>(io)
</code></pre><p>When reading the file and printing the result we can verify that the file contains the expected log output:</p><pre><code class="language-julia hljs"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;logfile.txt&quot;</span>, <span class="hljs-type">String</span>))
</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[ Info: Message to the logfile</code></pre><p>With this approach you might notice that, due to <a href="https://en.wikipedia.org/wiki/Data_buffer">IO buffering</a> the messages will be written to the file with a delay, or possibly not until the program ends and the file is closed. In addition it is somewhat annoying to manage the file IO stream yourself like in the example above. Because of these reasons it is often better to use a logger that are implemented specifically for file-writing.</p><p>The <a href="../../reference/loggingextras/#LoggingExtras.jl">LoggingExtras.jl</a> package provide the <a href="../../reference/loggingextras/#LoggingExtras.FileLogger-Tuple{Any}"><code>FileLogger</code></a>, and, as the name suggest, this is implemented specifically for writing messages to a file. The <code>FileLogger</code> opens the file and automatically flushes the stream after handling each messages. Here is an example of using the <code>FileLogger</code>:</p><pre><code class="language-julia hljs"><span class="hljs-keyword">using</span> Logging, LoggingExtras

logger <span class="hljs-keyword">=</span> <span class="hljs-built_in">FileLogger</span>(<span class="hljs-string">&quot;logfile.txt&quot;</span>)

<span class="hljs-built_in">with_logger</span>(logger) <span class="hljs-keyword">do</span>
    <span class="hljs-meta">@info</span> <span class="hljs-string">&quot;First message to the FileLogger!&quot;</span>
<span class="hljs-keyword">end</span>
</code></pre><p>Reading and printing the content:</p><pre><code class="language-julia hljs"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;logfile.txt&quot;</span>, <span class="hljs-type">String</span>))
</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ Info: First message to the FileLogger!
└ @ Main log-to-file.md:51</code></pre><p>By default, when the <code>FileLogger</code> opens the file stream it uses &quot;write&quot; mode (see documentation for <a href="https://docs.julialang.org/en/v1/base/io-network/#Base.open"><code>open</code></a>), which means that if the file exist and have some content this will be overwritten. There is an option to use &quot;append&quot; mode by passing <code>append = true</code> to the constructor. This will preserve content in the file and only append at the end. Here is an example of that where we open the same file from above, but use <code>append = true</code>:</p><pre><code class="language-julia hljs">logger <span class="hljs-keyword">=</span> <span class="hljs-built_in">FileLogger</span>(<span class="hljs-string">&quot;logfile.txt&quot;</span>; append <span class="hljs-keyword">=</span> <span class="hljs-literal">true</span>)

<span class="hljs-built_in">with_logger</span>(logger) <span class="hljs-keyword">do</span>
    <span class="hljs-meta">@info</span> <span class="hljs-string">&quot;Second message to the FileLogger?&quot;</span>
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;logfile.txt&quot;</span>, <span class="hljs-type">String</span>))
</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">┌ Info: First message to the FileLogger!
└ @ Main log-to-file.md:51
┌ Info: Second message to the FileLogger?
└ @ Main log-to-file.md:73</code></pre><p>As you can see, the first message is still in the file, and we only appended a second one.</p><p>The <code>FileLogger</code> uses a <a href="../../reference/logging/#Logging.SimpleLogger"><code>SimpleLogger</code></a> internally, so the output formatting is the same as the <code>SimpleLogger</code>. If you want to control the output formatting you can use a <a href="../../reference/loggingextras/#LoggingExtras.FormatLogger"><code>FormatLogger</code></a> (also from <a href="../../reference/loggingextras/#LoggingExtras.jl">LoggingExtras.jl</a>) instead. The <code>FormatLogger</code> accepts a formatting function as the first argument. The formatting function takes two arguments: (i) an IO stream to write the formatted message to and (ii) the logging arguments (see <a href="../../reference/loggingextras/#LoggingExtras.handle_message_args-Tuple"><code>LoggingExtras.handle_message_args</code></a>). Here is an example:</p><pre><code class="language-julia hljs"><span class="hljs-keyword">using</span> Logging, LoggingExtras

logger <span class="hljs-keyword">=</span> <span class="hljs-built_in">FormatLogger</span>(<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;logfile.txt&quot;</span>, <span class="hljs-string">&quot;w&quot;</span>)) <span class="hljs-keyword">do</span> io, args
    <span class="hljs-comment"># Write the module, level and message only</span>
    <span class="hljs-built_in">println</span>(io, args<span class="hljs-built_in">.</span>_module, <span class="hljs-string">&quot; | &quot;</span>, <span class="hljs-string">&quot;[&quot;</span>, args<span class="hljs-built_in">.</span>level, <span class="hljs-string">&quot;] &quot;</span>, args<span class="hljs-built_in">.</span>message)
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">with_logger</span>(logger) <span class="hljs-keyword">do</span>
    <span class="hljs-meta">@info</span> <span class="hljs-string">&quot;Info message to the FormatLogger!&quot;</span>
    <span class="hljs-meta">@warn</span> <span class="hljs-string">&quot;Warning message to the FormatLogger!&quot;</span>
<span class="hljs-keyword">end</span>

<span class="hljs-built_in">print</span>(<span class="hljs-built_in">read</span>(<span class="hljs-string">&quot;logfile.txt&quot;</span>, <span class="hljs-type">String</span>))
</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Main | [Info] Info message to the FormatLogger!
Main | [Warn] Warning message to the FormatLogger!</code></pre><p>With the <code>FormatLogger</code> we need to open the file stream manually with the preferred option (<code>&quot;w&quot;</code>, <code>&quot;a&quot;</code>, etc) but, just like the <code>FileLogger</code>, it flushes the stream after every message.</p><p>See also:</p><ul><li><a href="../tee/#Send-messages-to-multiple-locations">Send messages to multiple locations</a> for how to send log messages to multiple loggers, for example to a file <em>and</em> to the terminal.</li><li><a href="../rotate-log-files/#How-to-rotate-log-files">How to rotate log files</a> for more file logging options.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../enable-debug/">« How to enable <code>@debug</code> messages</a><a class="docs-footer-nextpage" href="../tee/">Send messages to multiple locations »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 2 May 2023 01:35">Tuesday 2 May 2023</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
